<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Radius Aesthetics â€¢ ggfields</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Radius Aesthetics">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ggfields</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.6.0003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/angle_correction.html">Angle Correction</a></li>
    <li><a class="dropdown-item" href="../articles/radius_aes.html">Radius Aesthetics</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pepijn-devries/ggfields/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Radius Aesthetics</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pepijn-devries/ggfields/blob/master/vignettes/radius_aes.Rmd" class="external-link"><code>vignettes/radius_aes.Rmd</code></a></small>
      <div class="d-none name"><code>radius_aes.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="radius-scales-and-guides">Radius scales and guides<a class="anchor" aria-label="anchor" href="#radius-scales-and-guides"></a>
</h2>
<div class="section level3">
<h3 id="size-does-matter">Size does matter<a class="anchor" aria-label="anchor" href="#size-does-matter"></a>
</h3>
<p>A vector has a radius (i.e., length) and an angle (direction). When
you depict a vector field, the radius often has a specific meaning: it
reflects a certain magnitude. For instance, a vector can represent the
magnitude and direction of a velocity. It could help your audience to
read your plot if they knew which magnitudes the length of the arrows in
your plot represent. This is why <code>ggfields</code> provides a legend
key for the <code>radius</code> aesthetic specified with
<code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">ggplot2::aes()</a></code>.</p>
<p>In order to provide a frame of reference, you need to specify
<code>max_radius</code> in your call to <code><a href="../reference/geom_fields.html">geom_fields()</a></code>
(default is 0.5 cm). This <code>max_radius</code> should have a absolute
or relative length unit (<code><a href="https://rdrr.io/r/grid/unit.html" class="external-link">grid::unit()</a></code>). Arrows in your
vector field will be scaled between zero and this
<code>max_radius</code>. This same <code>max_radius</code> is also used
to scale arrows in your legend keys.</p>
<p>Note that the axes are not trained on the size of the vectors (only
on the vector origins). You need to expand your x and y scales manually
if vectors are cut off. Also if the <code>max_radius</code> is larger
than the key width, you may run into visual problems. For large
<code>max_radius</code> values you have to increase the key width
manually, as shown in the example below.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pepijn-devries.github.io/ggfields/">ggfields</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/stars/" class="external-link">stars</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"seawatervelocity"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_fields.html">geom_fields</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>radius <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span>,</span>
<span>        angle  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">angle</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="va">seawatervelocity</span><span class="op">[</span>,<span class="fl">3</span><span class="op">:</span><span class="fl">11</span>,<span class="fl">6</span><span class="op">:</span><span class="fl">11</span><span class="op">]</span>,</span>
<span>    max_radius <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>radius  <span class="op">=</span> <span class="st">"v [m/s]"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## We have to increase the 'keywidth' as otherwise `max_radius` won't fit:</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>radius <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span>keywidth <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p</span></span></code></pre></div>
<p><img src="radius_aes_files/figure-html/init-1.svg" width="50%"></p>
</div>
<div class="section level3">
<h3 id="stay-positive">Stay positive<a class="anchor" aria-label="anchor" href="#stay-positive"></a>
</h3>
<p>It is important that the radius you wish to plot has only
non-negative values. This is because it is impossible to distinguish
between a vector with a negative magnitude and a vector with the same
positive magnitude with an angle rotate 180 degrees (i.e, a vector with
<code>radius = 1</code> and and <code>angle = 0</code> will look the
same as a vector with <code>radius = -1</code> and
<code>angle = pi</code>). Therefore, from the plot, you cannot tell
which vectors have a positive and which have a negative value. This is
why <code><a href="../reference/geom_fields.html">geom_fields()</a></code> will throw an error if you try to plot
negative radii.</p>
<p>This is also why you need to be careful with transformations.
Although, it is technically possible to log-transform your radii, you
might run into problems due to potentially resulting negative values.
You should also wonder whether transformed values accurately convey
information about the magnitude of your vectors. If you are considering
to apply transformations, try using binned or discrete scales
instead.</p>
</div>
<div class="section level3">
<h3 id="one-key-to-rule-them-all">One key to rule them all<a class="anchor" aria-label="anchor" href="#one-key-to-rule-them-all"></a>
</h3>
<p>The <code>radius</code> key in the guide legend can be combined into
one key with many other aesthetics, such as <code>colour</code>,
<code>linewidth</code>, <code>linetype</code>, etc. All you have to do
is make sure that all aesthetics use are assigned to the same variable
and use <code><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">ggplot2::guide_legend()</a></code>. The example below
illustrates how <code>colour</code> and <code>linewidth</code> can be
combined with <code>radius</code> in one legend.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span>, linewidth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">v</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## Let's give the aesthetics all the same name</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"v [m/s]"</span>, linewidth <span class="op">=</span> <span class="st">"v [m/s]"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## Make sure that the colour aesthetic uses the same guide as radius ("legend")</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_colour_viridis_c</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">"legend"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co">## Make sure all keys have the same width</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html" class="external-link">guides</a></span><span class="op">(</span>colour    <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span>keywidth <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>         linewidth <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html" class="external-link">guide_legend</a></span><span class="op">(</span>keywidth <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="st">"cm"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="radius_aes_files/figure-html/onekey-1.svg" width="50%"></p>
</div>
</div>
<div class="section level2">
<h2 id="vector-components">Vector components<a class="anchor" aria-label="anchor" href="#vector-components"></a>
</h2>
<p>What if you only have the x and y component of a vector instead of
its angle and radius? Can you provide those components as aesthetics to
<code><a href="../reference/geom_fields.html">geom_fields()</a></code>? Unfortunately, the answer is no. At least
not directly, as <code>radius</code> is required early on in the data
wrangling machinery of <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code>. However, the x
and y components of a vector can easily be converted into its angle and
radius, as shown in the example below.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/geom_fields.html">geom_fields</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>radius <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="../reference/pythagoras.html">pythagoras</a></span><span class="op">(</span><span class="va">vo</span>, <span class="va">uo</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                  angle  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">atan2</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">vo</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">uo</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>              <span class="va">seawatervelocity</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Pepijn de Vries.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
